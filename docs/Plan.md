# План автоматизации

## Перечень автоматизируемых сценариев

### Frontend

1. Успешная оплата тура "Путешествие дня" при валидном* заполнение полей формы "Оплата по карте" по действующей карте (номер карты заполнен с пробелами после каждых 4 символов)  
   Ожидаемый результат: появление сообщения об успешной оплате тура

1. Успешная оплата в кредит тура "Путешествие дня" при валидном* заполнение полей формы "Кредит по данным карты" по действующей карте (номер карты заполнен с пробелами после каждых 4 символов)  
   Ожидаемый результат: появление сообщения об успешной взятие кредита

1. Отказ в оплате тура "Путешествие дня" при валидном* заполнение полей формы "Оплата по карте" по declined карте (номер карты заполнен с пробелами после каждых 4 символов)  
   Ожидаемый результат: появление сообщения об отказе в оплате тура

1. Отказ в кредите на покупку тура "Путешествие дня" при валидном* заполнение полей формы "Кредит по данным карты" по declined карте (номер карты заполнен с пробелами после каждых 4 символов)  
   Ожидаемый результат: появление сообщения об отказе в взятие кредита

1. Заполнение всех полей валидными* данными формы "Оплата по карте" тура "Путешествие дня" с последующим переключением на форму "Кредит по данным карты"  
   Ожидаемый результат: форма переключиться, поля останутся заполненными теми же данными

1. Заполнение всех полей валидными* данными формы "Кредит по данным карты" тура "Путешествие дня" с последующим переключением на форму "Оплата по карте"  
   Ожидаемый результат: форма переключиться, поля останутся заполненными теми же данными

1. Заполнение поля "Номер карты" номером действующей карты без пробелов, остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: появление сообщения об успешной оплате тура

1. Оставление поля "Номер карты" пустым, остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: под полем "Номер карты" появиться предупреждение об пустом поле

1. Заполнение поля "Номер карты" 11 рандомными цифрами, остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: под полем "Номер карты" появиться предупреждение о недопустимой длине поля

1. Заполнение поля "Номер карты" 12 рандомными цифрами, остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: появление сообщения об отказе в оплате тура

1. Заполнение поля "Номер карты" 19 рандомными цифрами, остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: появление сообщения об отказе в оплате тура

1. Заполнение поля "Номер карты" 20 рандомными цифрами, остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: под полем "Номер карты" появиться предупреждение о недопустимой длине поля

1. Заполнение поля "Номер карты" 16 рандомными символами (не цифрами), остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: под полем "Номер карты" появиться предупреждение об недопустимых символах

1. Оставление поля "Месяц" пустым, остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: под полем "Месяц" появиться предупреждение об пустом поле

1. Заполнение поля "Месяц" номером с 1 до 9, остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: автодополнение нулем вначале в поле "Месяц"

1. Заполнение поля "Месяц" 3 цифрами, остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: обрезание последней цифры в поле "Месяц"

1. Заполнение поля "Месяц" значением 00, остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: под полем "Месяц" появиться предупреждение об невалидном значение

1. Заполнение поля "Месяц" значением 01, остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: появление сообщения об успешной оплате тура

1. Заполнение поля "Месяц" значением 12, остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: появление сообщения об успешной оплате тура

1. Заполнение поля "Месяц" значением 13, остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: под полем "Месяц" появиться предупреждение об невалидном значение

1. Заполнение поля "Месяц" двумя рандомными символами(не цифрами), остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: под полем "Месяц" появиться предупреждение об невалидном значение

1. Оставление поля "Год" пустым, остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: под полем "Год" появиться предупреждение об пустом поле

1. Заполнение поля "Год" предыдущим годом, остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: под полем "Год" появиться предупреждение об невалидном значение
 
1. Заполнение поля "Год" текущим годом, а поля "Месяц" предыдущим месяцем, остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: под полем "Месяц" появиться предупреждение об невалидном значение

1. Заполнение поля "Год" текущим годом и поля "Месяц" текущим месяцем, остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: появление сообщения об успешной оплате тура

1. Оставление поля "Владелец" пустым, остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: под полем "Владелец" появиться предупреждение об пустом поле

1. Заполнение поля "Владелец" валидными данными с дефисом, остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: появление сообщения об успешной оплате тура

1. Заполнение поля "Владелец" в нижнем регистре, остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: автозаполнение поля "Владелец" в верхнем регистре

1. Заполнение поля "Владелец" с пробелами в начале и в конце, остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: автоудаление лишних символов в поле "Владелец"

1. Заполнение поля "Владелец" с дефисами в начале и в конце, остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: автоудаление лишних символов в поле "Владелец"

1. Заполнение поля "Владелец" кириллицей, остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: под полем "Владелец" появиться предупреждение об невалидном значение

1. Заполнение поля "Владелец" рандомными спецсимволами, остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: под полем "Владелец" появиться предупреждение об невалидном значение

1. Оставление поля "CVC/CVV" пустым, остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: под полем "CVC/CVV" появиться предупреждение об пустом поле

1. Заполнение поля "CVC/CVV" 2 рандомными цифрами, остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: под полем "CVC/CVV"  появление сообщения об недопустимой длине

1. Заполнение поля "CVC/CVV" 4 рандомными цифрами, остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: 4 цифра в поле "CVC/CVV" обрезается

1. Заполнение поля "CVC/CVV" 3 рандомными буквами, остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: под полем "CVC/CVV"  появление сообщения об невалидном значение

1. Заполнение поля "CVC/CVV" 3 рандомными спецсимволами, остальные поля заполнены валидно* в форме "Оплата по карте" тура "Путешествие дня"  
   Ожидаемый результат: под полем "CVC/CVV"  появление сообщения об невалидном значение
   </a>

### Backend

1. Отправка POST запроса платежа с валидно* заполненным body и данными действующей карты на  http://localhost:9999/payment  
   Ожидаемый результат: статус 200, появление соответствующей записей в БД

1. Отправка POST запроса на кредит с валидно* заполненным body и данными действующей карты на  http://localhost:9999/credit  
   Ожидаемый результат: статус 200, появление соответствующей записей в БД

1. Отправка POST запроса платежа с валидно* заполненным body и данными declined карты на  http://localhost:9999/payment  
   Ожидаемый результат: статус 200, появление соответствующей записей в БД

1. Отправка POST запроса на кредит с валидно* заполненным body и данными declined карты на  http://localhost:9999/credit  
   Ожидаемый результат: статус 200, появление соответствующей записей в БД

1. Отправка POST запроса с пустым body на  http://localhost:9999/payment  
   Ожидаемый результат: статус 400, в БД не появляются новые записи

1. Отправка POST запроса с пустым body  на  http://localhost:9999/credit  
   Ожидаемый результат: статус 400, в БД не появляются новые записи

1. Отправка POST запроса платежа с пустым значением у атрибута number в body (остальные данные заполнены валидно) на  http://localhost:9999/payment  
   Ожидаемый результат: статус 400, в БД не появляются новые записи

1. Отправка POST запроса на кредит с пустым значением у атрибута number в body (остальные данные заполнены валидно) на  http://localhost:9999/credit  
   Ожидаемый результат: статус 400, в БД не появляются новые записи

1. Отправка POST запроса платежа с пустым значением у атрибута month в body (остальные данные заполнены валидно) на  http://localhost:9999/payment  
   Ожидаемый результат: статус 400, в БД не появляются новые записи

1. Отправка POST запроса на кредит с пустым значением у атрибута month в body (остальные данные заполнены валидно) на  http://localhost:9999/credit  
   Ожидаемый результат: статус 400, в БД не появляются новые записи

1. Отправка POST запроса платежа с пустым значением у атрибута year в body (остальные данные заполнены валидно) на  http://localhost:9999/payment  
   Ожидаемый результат: статус 400, в БД не появляются новые записи

1. Отправка POST запроса на кредит с пустым значением у атрибута year в body (остальные данные заполнены валидно) на  http://localhost:9999/credit  
   Ожидаемый результат: статус 400, в БД не появляются новые записи

1. Отправка POST запроса платежа с пустым значением у атрибута holder в body (остальные данные заполнены валидно) на  http://localhost:9999/payment  
   Ожидаемый результат: статус 400, в БД не появляются новые записи

1. Отправка POST запроса на кредит с пустым значением у атрибута holder в body (остальные данные заполнены валидно) на  http://localhost:9999/credit  
   Ожидаемый результат: статус 400, в БД не появляются новые записи

1. Отправка POST запроса платежа с пустым значением у атрибута cvc в body (остальные данные заполнены валидно) на  http://localhost:9999/payment  
   Ожидаемый результат: статус 400, в БД не появляются новые записи

1. Отправка POST запроса на кредит с пустым значением у атрибута cvc в body (остальные данные заполнены валидно) на  http://localhost:9999/credit  
   Ожидаемый результат: статус 400, в БД не появляются новые записи
   </a>

**Примечание*:** валидными значениями для полей являются:
- Номер карты: 12-19 цифр
- Месяц: число от 01 до 12 (при совпадение поля "Год" с текущим годом, номер месяца не должен быть раньше текущего)
- Год: две последние цифры текущего и последующих лет
- Владелец: латиница в ВЕРХНЕМ РЕГИСТРЕ, дефис и пробел, первый и последний символ должны быть буквами
- CVC/CVV: число длиной 3 цифры
  </a>

## Перечень используемых инструментов с обоснованием выбора

1. **IDE:** ***IntelliJ IDEA***
2. **Язык программирования:** ***Java***
3. **Система сборки:**  
   ***Gradle***  
   Легче настраивать зависимости по сравнению с Maven
4. **Тестовая среда:**  
   ***TestNG***  
   Имеет, по сравнению с JUnit, больше аннотаций для управления состоянием SUT (например @BeforeSuite, @AfterSuite), может разбивать тесты на наборы тестов (suite) и имеет больше возможностей по параметризации тестов
5. **Система репортинга:**  
   ***Allure***  
   Более сложные системы репортинга будут излишни  
6. **Фреймворк для frontend тестирования:**  
   ***Selenide***  
   Популярный и простой инструмент для UI тестов
7. **Фреймворки для backend тестирования:**  
   ***REST Assured***  
   Популярный инструмент для отправки REST запросов

   ***Gson***  
   Фреймворк для генерации body запросов при API тестирования

   ***DBUtils***  
   Простой инструмент для проверки состояния БД
8. **Дополнительные фреймворки:**  
   ***Java Faker***  
   Простой инструмент для генерации тестовых данных

   ***Lombok***  
   Фреймворк для автогенерации кода с целью улучшить читаемость тестов
   </a>

## Перечень и описание возможных рисков при автоматизации

1. Из-за того что тестируется функционал фичи "Путешествие дня", данные для тестов должны быть не "захардкоренными" т.е. тесты должны проходить после каждодневных изменений (например, изменение цены тура)
1. Заполнение полей "Месяц" и "Год" должно быть не "захардкоренными" и изменяться с течением времени
1. Из-за требование совместимости с двумя БД: MySQL, PostgreSQL, могут возникнут проблемы с разностью диалектов SQL
1. Из-за требование совместимости с двумя БД: MySQL, PostgreSQL, создается дополнительная трудность с настройкой SUT
1. Поскольку в качестве банковского сервиса выступает заглушка, есть риск что при подключение реальной системы появятся новые не выявленные дефекты
1. После каждого прогона тестов необходимо очистить БД от записей
1. Потеря актуальности тестов UI при любом изменение в дизайне
1. Потеря актуальности тестов API при изменение структуры запросов со стороны банка
   </a>

## Интервальная оценка с учётом рисков (в часах)

1. Настройка SUT, создание необходимых дата-хелперов и page object: 8 - 12 часов
1. Написание автотестов: 8 - 12 часов
1. Создание баг-репортов и отчёта по результатам прогона тестов: 4 - 6 часов
1. Отчёт по результатам автоматизации: 3 - 4 часа
1. Подключение CI (дополнительно): 3 - 4 часа
   </a>
   Всего: 26 - 38 часов

## План сдачи работ (когда будут авто-тесты, результаты их прогона и отчёт по автоматизации)

1. Авто-тесты будут готовы 25.07.2022
1. Баг-репорты и отчёт по результатам тестов: 27.07.2022
1. Отчёт по результатам автоматизации: 29.07.2022
   </a>
